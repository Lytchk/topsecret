<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Quick Survey</title>

  <style>
    :root{
      --pink1:#ff77b7;
      --pink2:#ffd1e8;
      --card:#ffffffee;
      --text:#3b0a2a;
      --accent:#ff2f92;
      --shadow: 0 14px 40px rgba(0,0,0,.12);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(1200px 700px at 20% 10%, #fff2f8 0%, transparent 55%),
                  radial-gradient(900px 600px at 85% 20%, #ffe6f2 0%, transparent 60%),
                  linear-gradient(135deg, var(--pink1), var(--pink2));
      color:var(--text);
      overflow:hidden;
      text-align:center;
    }

    /* Floating hearts background (light) */
    .bg-heart{
      position:fixed;
      font-size:18px;
      opacity:.16;
      animation: floatUp 10s linear infinite;
      pointer-events:none;
      filter: blur(.2px);
    }
    @keyframes floatUp{
      from{ transform:translateY(20vh) translateX(0) rotate(0deg); }
      to  { transform:translateY(-120vh) translateX(40px) rotate(18deg); }
    }

    .flowers{
      position:fixed;
      top:14px;
      right:16px;
      font-size:22px;
      user-select:none;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.15));
      animation: pulse 1.8s ease-in-out infinite;
    }
    @keyframes pulse{
      0%,100%{transform:scale(1); opacity:.95}
      50%{transform:scale(1.08); opacity:1}
    }

    .card{
      width:min(560px, 92vw);
      background:var(--card);
      border-radius:22px;
      box-shadow: var(--shadow);
      padding:22px 18px;
      position:relative;
      backdrop-filter: blur(6px);
    }

    .title{
      font-weight:800;
      font-size:20px;
      letter-spacing:.2px;
      margin:6px 0 10px;
      color:var(--accent);
    }

    #screen{
      padding:6px 6px 2px;
      line-height:1.35;
      min-height:140px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      gap:10px;
    }

    #question{
      font-size:18px;
      margin:0;
      transition: opacity 220ms ease, transform 220ms ease;
    }
    .fade-out{opacity:0; transform:translateY(6px)}
    .fade-in{opacity:1; transform:translateY(0)}

    .buttons{
      margin-top:8px;
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
    }

    button{
      border:none;
      cursor:pointer;
      padding:12px 16px;
      border-radius:999px;
      font-weight:700;
      font-size:15px;
      transition: transform 160ms ease, filter 160ms ease, opacity 160ms ease;
      box-shadow: 0 10px 18px rgba(0,0,0,.10);
    }
    button:active{ transform:scale(.98) }
    button:hover{ filter:brightness(1.03) }

    .btn-yes{
      background: linear-gradient(135deg, #ff2f92, #ff79bb);
      color:white;
    }
    .btn-no{
      background: #ffe0ef;
      color:#7a1a4d;
    }

    button:disabled{
      opacity:.35;
      cursor:not-allowed;
      box-shadow:none;
      transform:none !important;
    }

    /* Envelope */
    .envelope-wrap{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:10px;
      margin-top:8px;
    }
    .envelope{
      width:170px;
      height:120px;
      border-radius:18px;
      background: linear-gradient(135deg, #fff, #ffe6f2);
      position:relative;
      box-shadow: var(--shadow);
      border: 2px solid rgba(255,47,146,.18);
      overflow:hidden;
      cursor:pointer;
      transition: transform 180ms ease;
    }
    .envelope:hover{ transform: translateY(-2px) }
    .env-flap{
      position:absolute;
      left:0; right:0;
      top:-22px;
      margin:auto;
      width:0; height:0;
      border-left: 85px solid transparent;
      border-right:85px solid transparent;
      border-bottom: 70px solid #ffd3e8;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.08));
    }
    .env-body{
      position:absolute;
      left:0; right:0; bottom:0;
      height:68px;
      background: #fff;
      border-top: 2px solid rgba(255,47,146,.10);
    }
    .seal{
      position:absolute;
      width:34px;
      height:34px;
      border-radius:999px;
      background: radial-gradient(circle at 30% 30%, #ff95c9, #ff2f92);
      left:0; right:0;
      top:56px;
      margin:auto;
      box-shadow: 0 10px 14px rgba(255,47,146,.25);
      display:flex;
      align-items:center;
      justify-content:center;
      color:white;
      font-weight:900;
      font-size:14px;
    }
    .hint{
      font-size:13px;
      opacity:.75;
      margin:0;
    }

    /* Runaway NO button (Q3) */
    .runaway{
      position:fixed;
      z-index:9999;
      transition: left 220ms ease, top 220ms ease, transform 220ms ease;
      will-change: left, top, transform;
    }
    .runaway.escape{ transform: rotate(-7deg) scale(1.03); }

    /* Success confetti-ish pulse */
    .success{
      font-size:18px;
    }
    .sparkle{
      display:inline-block;
      animation: sparkle 900ms ease-in-out infinite;
    }
    @keyframes sparkle{
      0%,100%{transform:translateY(0)}
      50%{transform:translateY(-2px)}
    }
  </style>
</head>

<body>
  <!-- light floating hearts -->
  <div class="bg-heart" style="left:8%;  bottom:-10vh; animation-duration:12s;">üíó</div>
  <div class="bg-heart" style="left:22%; bottom:-18vh; animation-duration:10s;">üíû</div>
  <div class="bg-heart" style="left:45%; bottom:-14vh; animation-duration:14s;">üíñ</div>
  <div class="bg-heart" style="left:68%; bottom:-20vh; animation-duration:11s;">üíó</div>
  <div class="bg-heart" style="left:86%; bottom:-16vh; animation-duration:13s;">üíï</div>

  <div class="flowers" id="flowersDisplay">üå∏ üå∏ üå∏</div>

  <div class="card">
    <div class="title">‚ú¶ Secure Cute Protocol ‚ú¶</div>

    <div id="screen">
      <p id="question">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶ üíû</p>
      <div class="buttons" id="buttons"></div>

      <!-- Envelope screen container (we show/hide via JS) -->
      <div class="envelope-wrap" id="envelopeWrap" style="display:none;">
        <div class="envelope" id="envelopeBtn" title="–û—Ç–∫—Ä—ã—Ç—å">
          <div class="env-flap"></div>
          <div class="env-body"></div>
          <div class="seal">‚ô°</div>
        </div>
        <p class="hint">–ù–∞–∂–º–∏ –Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å üíå</p>
      </div>
    </div>
  </div>

  <script>
    // ----------------------------
    // State
    // ----------------------------
    let step = 0;
    let flowers = 3;

    // disable "–ù–µ—Ç" after one use on Q1 and Q2
    let q1NoUsed = false;
    let q2NoUsed = false;

    const qEl = document.getElementById("question");
    const btnsEl = document.getElementById("buttons");
    const flowersEl = document.getElementById("flowersDisplay");
    const envelopeWrap = document.getElementById("envelopeWrap");
    const envelopeBtn = document.getElementById("envelopeBtn");

    function updateFlowers(){
      flowersEl.textContent = "üå∏ ".repeat(flowers).trim();
    }

    function animateQuestion(html, renderButtonsFn){
      qEl.classList.add("fade-out");
      setTimeout(() => {
        qEl.innerHTML = html;
        qEl.classList.remove("fade-out");
        qEl.classList.add("fade-in");
        btnsEl.innerHTML = "";
        if (typeof renderButtonsFn === "function") renderButtonsFn();
        setTimeout(() => qEl.classList.remove("fade-in"), 240);
      }, 220);
    }

    function loseFlower(){
      flowers--;
      if (flowers < 0) flowers = 0;
      updateFlowers();
      if (flowers === 0){
        animateQuestion("ü•∫ –û–π‚Ä¶ —Ü–≤–µ—Ç–æ—á–∫–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å‚Ä¶<br><b>–î–æ—Å—Ç—É–ø –≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω</b> üö´", () => {
          btnsEl.innerHTML = "";
          envelopeWrap.style.display = "none";
        });
        return true; // locked
      }
      return false;
    }

    // ----------------------------
    // Runaway NO for question 3
    // ----------------------------
    function moveRunawayNo(){
      const noBtn = document.getElementById("noRunaway");
      if (!noBtn) return;

      noBtn.classList.add("runaway");

      const pad = 14;
      const w = noBtn.offsetWidth || 140;
      const h = noBtn.offsetHeight || 52;

      const maxX = window.innerWidth - w - pad;
      const maxY = window.innerHeight - h - pad;

      const x = Math.max(pad, Math.random() * maxX);
      const y = Math.max(pad, Math.random() * maxY);

      noBtn.classList.add("escape");
      noBtn.style.left = x + "px";
      noBtn.style.top  = y + "px";
      setTimeout(() => noBtn.classList.remove("escape"), 220);
    }

    // ----------------------------
    // Flow Screens
    // ----------------------------

    function render(){
      envelopeWrap.style.display = "none";
      btnsEl.innerHTML = "";

      // STEP 0: Disclaimer
      if (step === 0){
        animateQuestion(
          "‚ö†Ô∏è <b>–í–ù–ò–ú–ê–ù–ò–ï</b> ‚ö†Ô∏è<br><br>" +
          "–ï—Å–ª–∏ –≤—ã –ø—Ä–æ–π–¥—ë—Ç–µ —ç—Ç–æ—Ç —Ç–µ—Å—Ç‚Ä¶<br>" +
          "—É—Ä–æ–≤–µ–Ω—å <b>–¥–æ—Ñ–∞–º–∏–Ω–∞</b> –∏ <b>—Å–µ—Ä–æ—Ç–æ–Ω–∏–Ω–∞</b> –º–æ–∂–µ—Ç <b>–ó–ê–®–ö–ê–õ–ò–í–ê–¢–¨</b> üò≥üíò<br><br>" +
          "–ö–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç ¬´–ù–µ—Ç¬ª = –º–∏–Ω—É—Å –æ–¥–∏–Ω üå∏<br>" +
          "–£ –≤–∞—Å –≤—Å–µ–≥–æ <b>3</b> üå∏",
          () => {
            btnsEl.innerHTML =
              `<button class="btn-yes" onclick="step=1; render()">–ü–æ–Ω—è–ª–∞ üôÇ</button>`;
          }
        );
        return;
      }

      // STEP 1: Envelope
      if (step === 1){
        animateQuestion("–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ —Å–µ–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ‚Ä¶ üíå<br><b>–û—Ç–∫—Ä—ã—Ç—å?</b> üëÄ", () => {
          btnsEl.innerHTML = "";
          envelopeWrap.style.display = "flex";
        });

        envelopeBtn.onclick = () => {
          step = 2;
          render();
        };
        return;
      }

      // STEP 2: Q1 ‚Äî –ü—Ä–∏–≤–µ—Ç
      if (step === 2){
        animateQuestion("–ü—Ä–∏–≤–µ—Ç üòä", () => {
          btnsEl.innerHTML =
            `<button class="btn-yes" onclick="step=3; render()">–ü—Ä–∏–≤–µ—Ç üíó</button>` +
            `<button class="btn-no" ${q1NoUsed ? "disabled" : ""} onclick="q1No()">–ù–µ—Ç</button>`;
        });
        return;
      }

      // STEP 3: Q2 ‚Äî –ø–ª–∞–Ω—ã –Ω–∞ 14 —Ñ–µ–≤—Ä–∞–ª—è
      if (step === 3){
        animateQuestion("–ö–∞–∫–∏–µ –ø–ª–∞–Ω—ã –Ω–∞ <b>14 —Ñ–µ–≤—Ä–∞–ª—è</b>? üëâüèªüëàüèª", () => {
          btnsEl.innerHTML =
            `<button class="btn-yes" onclick="q2Yes()">–ù–µ –∑–∞–Ω—è—Ç–∞ üòå</button>` +
            `<button class="btn-no" ${q2NoUsed ? "disabled" : ""} onclick="q2No()">–ù–µ—Ç</button>`;
        });
        return;
      }

      // STEP 4: Q3 ‚Äî be my valentine (No runs away)
      if (step === 4){
        animateQuestion("–ë—É–¥–µ—à—å –º–æ–µ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π? ü•∫üíò", () => {
          // YES button is normal
          const yes = document.createElement("button");
          yes.className = "btn-yes";
          yes.textContent = "–î–ê, –ö–û–ù–ï–ß–ù–û! üíû";
          yes.onclick = () => { step = 5; render(); };

          // NO button runs away
          const no = document.createElement("button");
          no.className = "btn-no runaway";
          no.id = "noRunaway";
          no.textContent = "–ù–µ—Ç";
          // move away on hover/touch/click
          no.onmouseenter = moveRunawayNo;
          no.ontouchstart = (e) => { e.preventDefault(); moveRunawayNo(); };
          no.onclick = (e) => { e.preventDefault(); moveRunawayNo(); };

          btnsEl.appendChild(yes);
          btnsEl.appendChild(no);

          // initial nudge so it doesn't sit still
          // place NO next to YES at the start
setTimeout(() => {
  const yesRect = yes.getBoundingClientRect();

  no.style.left = (yesRect.right + 12) + "px";
  no.style.top  = (yesRect.top) + "px";
}, 50);

        });
        return;
      }

      // STEP 5: Final message (your exact text)
      if (step === 5){
        animateQuestion(
          `<span class="success">‚úÖ –û–ø–µ—Ä–∞—Ü–∏—è –æ–¥–æ–±—Ä–µ–Ω–∞! <span class="sparkle">‚ú®</span></span><br><br>` +
          `–î–∞–≤–∞–π <b>–ø–æ—Ç—É—Å–∏–º (–∫–∞–∫ –¥—Ä—É–∑—å—è)</b> <b>14 —Ñ–µ–≤—Ä–∞–ª—è</b> üòÑ).<br>` +
          `–ü–æ–∫—É—à–∞–µ–º –≤–º–µ—Å—Ç–µ <b>(–Ω–µ —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏)</b> üçΩÔ∏è<br>` +
          `–Ø –∫—É–ø–ª—é —Ç–µ–±–µ <b>—Ü–≤–µ—Ç—ã </b> üå∏üòå<br>` +
          `–ò —Å–¥–µ–ª–∞–µ–º <b>—Ñ–æ—Ç–∫–∏</b> –≤–º–µ—Å—Ç–µ ‚Äî –Ω–∞ –ø–∞–º—è—Ç—å üì∏üíû`,
          () => {
            btnsEl.innerHTML =
              `<button class="btn-yes" onclick="step=6; render()">–û–∫ ü•∞</button>`;
          }
        );
        return;
      }

      // STEP 6: End
      if (step === 6){
        animateQuestion("–ö–æ–Ω–µ—Ü –º–∏—Å—Å–∏–∏ üòéüíó<br>–£–≤–∏–¥–∏–º—Å—è 14-–≥–æ! üå∏üì∏", () => {
          btnsEl.innerHTML =
            `<button class="btn-no" onclick="location.reload()">–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ üîÅ</button>`;
        });
        return;
      }
    }

    // ----------------------------
    // Q1 logic
    // ----------------------------
    function q1No(){
      if (q1NoUsed) return;
      q1NoUsed = true;

      if (loseFlower()) return;

      animateQuestion("üò≥ –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ: ¬´–ù–µ—Ç¬ª‚Ä¶<br>–ú–∏–Ω—É—Å –æ–¥–∏–Ω üå∏<br><br>–ü–æ–ø—Ä–æ–±—É–µ–º –µ—â—ë —Ä–∞–∑? ü•∫", () => {
        btnsEl.innerHTML =
          `<button class="btn-yes" onclick="step=2; render()">–û–∫</button>`;
      });
    }

    // ----------------------------
    // Q2 logic
    // ----------------------------
    function q2Yes(){
      animateQuestion("‚úÖ –ü–æ–∑–∏—Ç–∏–≤–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞! ‚ú®üíû", () => {
        btnsEl.innerHTML =
          `<button class="btn-yes" onclick="step=4; render()">–î–∞–ª—å—à–µ üëâ</button>`;
      });
    }

    function q2No(){
      if (q2NoUsed) return;
      q2NoUsed = true;

      if (loseFlower()) return;

      animateQuestion("üòÖ –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç‚Ä¶<br>–ú–∏–Ω—É—Å –æ–¥–∏–Ω üå∏<br><br>–í–µ—Ä–Ω—ë–º—Å—è –∫ –≤–æ–ø—Ä–æ—Å—É? üëâüèªüëàüèª", () => {
        btnsEl.innerHTML =
          `<button class="btn-yes" onclick="step=3; render()">–í–µ—Ä–Ω—É—Ç—å—Å—è</button>`;
      });
    }

    // start
    setTimeout(() => {
      updateFlowers();
      step = 0;
      render();
    }, 300);
  </script>
</body>
</html>


